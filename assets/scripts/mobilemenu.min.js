/*
 A simple jQuery plugin for creating animated drilldown menus.

 @name jQuery Drilldown
 @version 0.1.2
 @requires jQuery v1.7+
 @author Aleksandras Nelkinas
 @license [MIT]{@link http://opensource.org/licenses/mit-license.php}

 Copyright (c) 2013 Aleksandras Nelkinas
 Creates a mobile menu based on drilldown.js from Aleksandras Nelkinas

  @name Mobile Menu
  @author Johannes Grandy
  @license Do whatever you want

  Copyright (c) 2014 Johannes Grandy

*/
(function(d){"function"===typeof define&&define.amd?define(["jquery"],d):d(jQuery)})(function(d,f){function a(c,b){this._name="drilldown";this._defaults=e;this.element=c;this.$element=d(c);this.options=d.extend({},e,b);this.init()}var e={event:"click",selector:"a",speed:100,cssClass:{container:"drilldown-container",root:"drilldown-root",sub:"drilldown-sub",back:"drilldown-back"}};a.prototype={history:[],css:{"float":"left",width:null},init:function(){var c=this;this.$container=this.$element.find("."+
this.options.cssClass.container);this.$element.on(this.options.event,this.options.selector,function(b){c.handleAction.call(c,b,d(this))})},handleAction:function(c,b){var a=b.nextAll("."+this.options.cssClass.sub),d=!0;a.length?this.down(a):b.closest("."+this.options.cssClass.back).length?this.up():d=!1;d&&"A"===b.prop("tagName")&&c.preventDefault()},down:function(c){var b=this;c.length&&(this.css.width=this.$element.outerWidth(),this.$container.width(2*this.css.width),c=this.$container.find("."+this.options.cssClass.root).first().clone().html(c.html()),
this.$container.append(c),this.animateDrilling(-1*this.css.width,function(){var a=c.prev();b.history.push(a);b.restoreState.call(b,a,c)}))},up:function(){var a=this,b=this.history.pop();this.css.width=this.$element.outerWidth();this.$container.width(2*this.css.width);this.$container.prepend(b);this.animateDrilling(0,function(){var c=b.next();a.restoreState.call(a,c,b)})},animateDrilling:function(a,b){var c=this.$container.children("."+this.options.cssClass.root);c.css(this.css);c.first().animate({"margin-left":a},
this.options.speed,b)},restoreState:function(a,b){b.css({"float":"none",width:"auto"});a.remove();this.$container.width("auto")}};d.fn.drilldown=function(c){return this.each(function(){d.data(this,"drilldown")||d.data(this,"drilldown",new a(this,c))})}});
(function(d){var f={init:function(a){jQuery.fn.mobilemenu.settings=d.extend({},jQuery.fn.mobilemenu.settings,a);var e=jQuery.fn.mobilemenu.settings;a=this.clone();a.addClass("mobilemenu_drilldownmenu").find("li").each(function(){var a=jQuery(this),b=a.children("ul"),c=a.children("a").text(),d=a.children("a").attr("href");b.addClass("mobilemenu_drilldownsubmenu").hide();0<b.length&&(a.addClass("mobilemenu_drilldowndeeper"),e.cloneParents&&b.prepend('<li class="mobilemenu_drilldownparent"><a href="'+
d+'">'+c+"</a></li>"),jQuery('<li class="mobilemenu_drilldownback" style="position: relative;"><a href="#">'+e.drilldownBack+"</a></li>").prependTo(b))});var c=jQuery('<div id="mobilemenu_overlay"></div>').appendTo("body"),b=jQuery('<div id="mobilemenu_slide"></div>').appendTo("body");b=jQuery('<div id="mobilemenu_main"></div>').appendTo(b);var f=jQuery('<div class="mobilemenu_drilldown"></div>').appendTo(b);a.appendTo(f);b.drilldown({event:"click",selector:"a",speed:e.drilldownAnimationSpeed,cssClass:{container:"mobilemenu_drilldown",
root:"mobilemenu_drilldownmenu",sub:"mobilemenu_drilldownsubmenu",back:"mobilemenu_drilldownback"}});c.on("click",function(a){fvw.hash.remove()});jQuery(window).bind("hashchange load",function(a){fvw.hash.beginsWidth("mobilemenu")?jQuery.fn.mobilemenu("open"):jQuery.fn.mobilemenu("close")});e.onCreate(e)},open:function(){var a=jQuery.fn.mobilemenu.settings;jQuery("body").addClass("mobilemenu_active");a.onOpen(this,a)},close:function(){var a=jQuery.fn.mobilemenu.settings;jQuery("body").removeClass("mobilemenu_active");
a.onClose(this,a)}};jQuery.fn.mobilemenu=function(a){if(f[a])return f[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)jQuery.error("Method "+a+" does not exist on jQuery.mobilemenu");else return f.init.apply(this,arguments)};jQuery.fn.mobilemenu.settings={closeOnUnload:!0,cloneParents:!0,drilldownBack:fvwFramework.mobilemenuBack,drilldownAnimationSpeed:130,onCreate:function(){},onOpen:function(){},onClose:function(){}}})(jQuery);